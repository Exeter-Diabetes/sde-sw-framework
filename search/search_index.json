{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Introduction \u00b6 This documentation defines the core diabetes dataset, including codelists and implementation rules for deriving its components, alongside code to extract these in a reproducible way. It also contains information on related projects. Core diabetes dataset \u00b6 The core diabetes dataset defines a standardised set of variables describing diabetes diagnosis, classification, treatment, and key outcomes, derived from routinely collected health data. It is designed to support consistent, reproducible analyses across studies by providing clear variable definitions, validated codelists, and explicit implementation rules for data extraction and derivation. This dataset was agreed by expert consensus with input from patients and the public as defined here [link to paper]. It was developed as part of a 2025-2026 NHS-funded driver project . The core data set can be found here: Core diabetes dataset Exeter 10,000 \u00b6 The Exeter 10,000 data set can be found here: Exeter 10,000 Codelists \u00b6 Codelists and algorithms for defining variables in routine primary and secondary care data (SNOMED, dm+d, ICD10 and OPCS4), as well as implementation rules, are provided for the components of the core diabetes dataset and other variables.","title":"Home"},{"location":"index.html#introduction","text":"This documentation defines the core diabetes dataset, including codelists and implementation rules for deriving its components, alongside code to extract these in a reproducible way. It also contains information on related projects.","title":"Introduction"},{"location":"index.html#core-diabetes-dataset","text":"The core diabetes dataset defines a standardised set of variables describing diabetes diagnosis, classification, treatment, and key outcomes, derived from routinely collected health data. It is designed to support consistent, reproducible analyses across studies by providing clear variable definitions, validated codelists, and explicit implementation rules for data extraction and derivation. This dataset was agreed by expert consensus with input from patients and the public as defined here [link to paper]. It was developed as part of a 2025-2026 NHS-funded driver project . The core data set can be found here: Core diabetes dataset","title":"Core diabetes dataset"},{"location":"index.html#exeter-10000","text":"The Exeter 10,000 data set can be found here: Exeter 10,000","title":"Exeter 10,000"},{"location":"index.html#codelists","text":"Codelists and algorithms for defining variables in routine primary and secondary care data (SNOMED, dm+d, ICD10 and OPCS4), as well as implementation rules, are provided for the components of the core diabetes dataset and other variables.","title":"Codelists"},{"location":"code_lists/conditions/diabetes/info.html","text":"Description \u00b6 This is a list of codes for diabetes: type 1, type 2 and unspecified type. It does not include codes for other types of diabetes e.g. gestational, secondary, monogenic, syndromic. Rules \u00b6 We check to make sure the date is within the range expected given the data source and patient DOB and death dates. Presence of one of these codes may not be sufficient to define diabetes cases. In primary care data, the presence of a diabetes Quality and Outcome Framework (QOF) code is more specific for true diabetes cases. In addition, specificity can be increased by removing patients with codes for other types of diabetes mellitus (gestational, secondary etc.) or diabetes insipidus, who may erroneously have diabetes mellitus codes in their records. Our algorithm for defining diabetes diagnosis date: the earliest of a code for diabetes, an HbA1c>=48 mmol/mol (see investigation/HbA1c) or a prescription for a glucose-lowering medication (including insulin; see medications/diabetes). It may not be possible to determine diagnosis dates in some datasets if historical data is not available. For those with type 2 diabetes, diabetes codes within the year of birth are ignored. It may be possible to ignore other diabetes codes which clearly do not relate to diagnosis in some datasets e.g. in CPRD ignore diabetes codes with obstype=4 as these represent family history. Our algorithm for distinguishing between type 1 and type 2 diabetes: No insulin prescriptions: Type 2 With at least one insulin prescription: At least one Type 1 and no Type 2 codes: Type 1 At least one Type 2 and no Type 1 codes: Type 2 Mix of Type 1 and Type 2 codes: if number of Type 1 medcodes >=2 x number of Type 2 medcodes, Type 1, otherwise Type 2 No Type 1 or Type 2 codes: leave as 'unclassified'. If required, a probable diabetes type can be assigned as follows: where time to insulin from diagnosis available: if diagnosed <35 years of age and on insulin within 1 year of diagnosis, Type 1, otherwise Type 2; if time to insulin not available: if diagnosed <35 years and not currently taking a non-insulin glucose-lowering medication (no prescription for a non-insulin glucose-lowering medication within 6 months, Type 1, otherwise Type 2. Since diabetes type is used to inform whether diabetes codes in year of birth should be excluded or not, this can create a circular problem in those with no type 1 or type 2-specific codes, where someone is classified as type 1 if diabetes codes in year of birth are included, and type 2 if diabetes medcodes in year of birth are excluded (or vice versa, if time to insulin from diagnosis is affected). These people are classed as 'unclassified', and need further investigation to establish diabetes type and date/age of diagnosis. Origins \u00b6 The origin of the SNOMED codelist was searching for diabetes and related codes in the SNOMED CT UK edition release 41.2.0 from NHS TRUD. Data \u00b6 Diabetes SNOMED","title":"Description"},{"location":"code_lists/conditions/diabetes/info.html#description","text":"This is a list of codes for diabetes: type 1, type 2 and unspecified type. It does not include codes for other types of diabetes e.g. gestational, secondary, monogenic, syndromic.","title":"Description"},{"location":"code_lists/conditions/diabetes/info.html#rules","text":"We check to make sure the date is within the range expected given the data source and patient DOB and death dates. Presence of one of these codes may not be sufficient to define diabetes cases. In primary care data, the presence of a diabetes Quality and Outcome Framework (QOF) code is more specific for true diabetes cases. In addition, specificity can be increased by removing patients with codes for other types of diabetes mellitus (gestational, secondary etc.) or diabetes insipidus, who may erroneously have diabetes mellitus codes in their records. Our algorithm for defining diabetes diagnosis date: the earliest of a code for diabetes, an HbA1c>=48 mmol/mol (see investigation/HbA1c) or a prescription for a glucose-lowering medication (including insulin; see medications/diabetes). It may not be possible to determine diagnosis dates in some datasets if historical data is not available. For those with type 2 diabetes, diabetes codes within the year of birth are ignored. It may be possible to ignore other diabetes codes which clearly do not relate to diagnosis in some datasets e.g. in CPRD ignore diabetes codes with obstype=4 as these represent family history. Our algorithm for distinguishing between type 1 and type 2 diabetes: No insulin prescriptions: Type 2 With at least one insulin prescription: At least one Type 1 and no Type 2 codes: Type 1 At least one Type 2 and no Type 1 codes: Type 2 Mix of Type 1 and Type 2 codes: if number of Type 1 medcodes >=2 x number of Type 2 medcodes, Type 1, otherwise Type 2 No Type 1 or Type 2 codes: leave as 'unclassified'. If required, a probable diabetes type can be assigned as follows: where time to insulin from diagnosis available: if diagnosed <35 years of age and on insulin within 1 year of diagnosis, Type 1, otherwise Type 2; if time to insulin not available: if diagnosed <35 years and not currently taking a non-insulin glucose-lowering medication (no prescription for a non-insulin glucose-lowering medication within 6 months, Type 1, otherwise Type 2. Since diabetes type is used to inform whether diabetes codes in year of birth should be excluded or not, this can create a circular problem in those with no type 1 or type 2-specific codes, where someone is classified as type 1 if diabetes codes in year of birth are included, and type 2 if diabetes medcodes in year of birth are excluded (or vice versa, if time to insulin from diagnosis is affected). These people are classed as 'unclassified', and need further investigation to establish diabetes type and date/age of diagnosis.","title":"Rules"},{"location":"code_lists/conditions/diabetes/info.html#origins","text":"The origin of the SNOMED codelist was searching for diabetes and related codes in the SNOMED CT UK edition release 41.2.0 from NHS TRUD.","title":"Origins"},{"location":"code_lists/conditions/diabetes/info.html#data","text":"Diabetes SNOMED","title":"Data"},{"location":"code_lists/investigations/BMI/info.html","text":"Description \u00b6 This is a list of codes for measured BMI values. Rules \u00b6 We check to make sure the date is within the range expected given the data source and patient DOB and death dates. We remove values less than 15 and greater than 100 kg per square meter as these are implausible for adults. We apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. Origins \u00b6 The origin of the SNOMED codelist was source codelists from Andy McGovern/RCGP and the BHF; reviewed by Andy McGovern in 2021. Data \u00b6 BMI SNOMED","title":"Description"},{"location":"code_lists/investigations/BMI/info.html#description","text":"This is a list of codes for measured BMI values.","title":"Description"},{"location":"code_lists/investigations/BMI/info.html#rules","text":"We check to make sure the date is within the range expected given the data source and patient DOB and death dates. We remove values less than 15 and greater than 100 kg per square meter as these are implausible for adults. We apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean.","title":"Rules"},{"location":"code_lists/investigations/BMI/info.html#origins","text":"The origin of the SNOMED codelist was source codelists from Andy McGovern/RCGP and the BHF; reviewed by Andy McGovern in 2021.","title":"Origins"},{"location":"code_lists/investigations/BMI/info.html#data","text":"BMI SNOMED","title":"Data"},{"location":"code_lists/investigations/HbA1c/info.html","text":"Description \u00b6 This is a list of codes for measured HbA1c values. Rules \u00b6 We check to make sure the date is within the range expected given the data source and patient DOB and death dates. We convert all values to mmol/mol; where unit codes are not available we assume values <=20 are in % and require conversion. We remove mmol/mol values less than 20 and greater than 195 mmol/mol as these are implausible. We apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. In patients with diabetes, the earliest HbA1c>=48 mmol/mol is used in the algorithm to define diagnosis date - see conditions/diabetes. Origins \u00b6 The origin of the SNOMED codelist was the Pathology Bounded Code List (PBCL). Data \u00b6 HbA1c SNOMED","title":"Description"},{"location":"code_lists/investigations/HbA1c/info.html#description","text":"This is a list of codes for measured HbA1c values.","title":"Description"},{"location":"code_lists/investigations/HbA1c/info.html#rules","text":"We check to make sure the date is within the range expected given the data source and patient DOB and death dates. We convert all values to mmol/mol; where unit codes are not available we assume values <=20 are in % and require conversion. We remove mmol/mol values less than 20 and greater than 195 mmol/mol as these are implausible. We apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. In patients with diabetes, the earliest HbA1c>=48 mmol/mol is used in the algorithm to define diagnosis date - see conditions/diabetes.","title":"Rules"},{"location":"code_lists/investigations/HbA1c/info.html#origins","text":"The origin of the SNOMED codelist was the Pathology Bounded Code List (PBCL).","title":"Origins"},{"location":"code_lists/investigations/HbA1c/info.html#data","text":"HbA1c SNOMED","title":"Data"},{"location":"code_lists/medications/diabetes/info.html","text":"Description \u00b6 These are lists of dm+d codes for non-insulin glucose-lowering medication and insulin. Rules \u00b6 We check to make sure the date is within the range expected given the data source and patient DOB and death dates. In patients with diabetes, the earliest prescription for a glucose-lowering medication/insulin is used in the algorithm to define diagnosis date - see conditions/diabetes. In patients with diabetes, being prescribed insulin is used in the algorithm to define diabetes type - see conditions/diabetes. Origins \u00b6 The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD). Data \u00b6 insulin_dmd insulin_names non_insulin_dm_meds_dmd non_insulin_dm_meds_dmd","title":"Description"},{"location":"code_lists/medications/diabetes/info.html#description","text":"These are lists of dm+d codes for non-insulin glucose-lowering medication and insulin.","title":"Description"},{"location":"code_lists/medications/diabetes/info.html#rules","text":"We check to make sure the date is within the range expected given the data source and patient DOB and death dates. In patients with diabetes, the earliest prescription for a glucose-lowering medication/insulin is used in the algorithm to define diagnosis date - see conditions/diabetes. In patients with diabetes, being prescribed insulin is used in the algorithm to define diabetes type - see conditions/diabetes.","title":"Rules"},{"location":"code_lists/medications/diabetes/info.html#origins","text":"The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD).","title":"Origins"},{"location":"code_lists/medications/diabetes/info.html#data","text":"insulin_dmd insulin_names non_insulin_dm_meds_dmd non_insulin_dm_meds_dmd","title":"Data"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html","text":"Description \u00b6 This is a description of how date of birth is defined when either date or date and month of birth are not provided. Rules \u00b6 Earliest possible date of birth is defined as the 1st of the month (where month of birth and year of birth available) / 1st January where only year of birth available Patient date of birth is defined as the earliest of: 15th of month of birth (where month of birth and year of birth available) / 1st July where only year of birth available Earliest recorded code in records (excluding those before earliest possible date of birth) Registration start date, where available (excluding before earliest possible date of birth) Origins \u00b6 Not applicable Data \u00b6 Not applicable","title":"Description"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#description","text":"This is a description of how date of birth is defined when either date or date and month of birth are not provided.","title":"Description"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#rules","text":"Earliest possible date of birth is defined as the 1st of the month (where month of birth and year of birth available) / 1st January where only year of birth available Patient date of birth is defined as the earliest of: 15th of month of birth (where month of birth and year of birth available) / 1st July where only year of birth available Earliest recorded code in records (excluding those before earliest possible date of birth) Registration start date, where available (excluding before earliest possible date of birth)","title":"Rules"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#origins","text":"Not applicable","title":"Origins"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#data","text":"Not applicable","title":"Data"},{"location":"projects/Core%20dataset/info.html","text":"Core diabetes dataset \u00b6 This page details the steps to produce the tables which comprise the core diabetes dataset in GP data. These tables can then be combined to create different diabetes cohorts. Prerequisites: * Date of birth (at least year of birth; month and year is preferable) available for all patients; those without should be excluded. * Sex/gender available for all patients (male/female/indeterminate or other) * Additional data cleaning steps depend on data source: CPRD additional exclude those without valid registration date or aged >115 years, or from practices with anomalous mortality rates Additional considerations: * Earliest codes for conditions such as diabetes may be stored in 'problem' or 'observation' table depending on data source. Step Description Output Summary statistics for quality checking 1 Create a table of all instances of all diabetes SNOMED codes Table with multiple rows per patient, with each valid instance of a diabetes SNOMED code including patient identifier, date of diabetes code observation, and type of diabetes code (type 1, type 2, unspecified diabetes type) Number of unique patients with diabetes SNOMED code and % of patients in dataset 2 Find earliest diabetes code per patient Table with 1 row per patient and date of earliest code observation 3 Create a table of all instances of measured HbA1c Table with multiple rows per patient, with each instance of a valid HbA1c SNOMED code including patient identifier, date of result, value of result, and units of value where possible N/A 4 Create a table of all insulin and non-insulin glucose-lowering medication prescriptions Table with multiple rows per patient, with each instance of a valid dm+d code including patient identifier, date of prescription, drug class and drug substance, and any information relating to drug substance, quantity and dose available N/A 5 Find earliest HbA1c>=48 mmol/mol per patient Table with 1 row per patient and date of earliest HbA1c>=48 mmol/mol (NB: this relates to values after cleaning, which includes combining multiple values if on the same day Distribution of earliest code dates: min, P25, P50, P75, max 6 Find earliest insulin and non-insulin glucose-lowering medication prescription per patient Table with 1 row per patient and date of earliest prescription Distribution of earliest code dates: min, P25, P50, P75, max 7 Find diabetes diagnosis dates: earliest of diabetes code (step 2), HbA1c>=48 mmol/mol (step 5) and glucose-lowering medication prescription (step 6) Table with 1 row per patient and date of earliest diabetes code, HbA1c>=48 mmol/mol and glucose-lowering medication prescription, and overall earliest date of these Of patients with a diabetes code: % with any HbA1c>=48mmol/mol, % with earliest HbA1c>=48mmol/mol earlier than earliest diabetes code, % with any glucose-lowering medication prescription, % with earliest glucose-lowering medication prescription earlier than earliest diabetes code, % with any HbA1c>=48mmol/mol or glucose-lowering medication prescription, % with earliest HbA1c>=48mmol/mol or earliest glucose-lowering medication prescription earlier than earliest diabetes code 8 Find counts of type 1 and type 2-specific diabetes codes per patient Table with 1 row per patient and counts of type 1-specific diabetes SNOMED codes (use raw data, not cleaned) and counts of type 2-specific diabetes SNOMED codes N/A 9 Determine patient diabetes type using insulin use (step 4) and type 1 and type 2 code counts (step 8) as per our algorithm Table with 1 row per patient and assigned diabetes type: 'type 1', 'type 2' or 'unclassified' Of those with a diabetes code: % type 1, % type 2, % unclassified 10 For each of the following variables, create a table of all instances of the relevant SNOMED codes: Ethnicity BMI Weight Height Systolic blood pressure (SBP) Systolic blood pressure (DBP) Total cholesterol HDL cholesterol Triglycerides Alanine aminotransferase (ALT) Creatinine Urine albumin/creatinine ratio (ACR) Urine albumin Urine creatinine Retinopathy Foot complication Amputation Myocardial infarction Heart failure Stroke Angina Peripheral arterial disease Peripheral arterial revascularisation Transient ischaemic attack Hypertension Atrial fibrillation Ischaemic heart disease Coronary revascularisation Chronic kidney disease stage 5 Diabetic ketoacidosis/hyperosmolar hyperglycaemic state Alcohol Smoking CGM prescription Lipid lowering medication prescription Blood-pressure lowering medication prescription Anti-platelet therapy prescription For each variable, table with multiple rows per patient including patient identifier, date, severity of code (retinopathy, foot complication, amputation only), value of result and units where available (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR only) N/A 11 Define ethnicity using our algorithm Table with 1 row per patient and ethnicity % of all patients in each of 5-category and 11-category ethnicities and with missing ethnicity 12 Estimate date of birth (using our algorithm) if exact dates not provided Table with 1 row per patient and estimated date of birth Distribution of ages of diabetes diagnosis for each of type 1, type 2 and unclassified: min, P25, P50, P75, max","title":"Core diabetes dataset"},{"location":"projects/Core%20dataset/info.html#core-diabetes-dataset","text":"This page details the steps to produce the tables which comprise the core diabetes dataset in GP data. These tables can then be combined to create different diabetes cohorts. Prerequisites: * Date of birth (at least year of birth; month and year is preferable) available for all patients; those without should be excluded. * Sex/gender available for all patients (male/female/indeterminate or other) * Additional data cleaning steps depend on data source: CPRD additional exclude those without valid registration date or aged >115 years, or from practices with anomalous mortality rates Additional considerations: * Earliest codes for conditions such as diabetes may be stored in 'problem' or 'observation' table depending on data source. Step Description Output Summary statistics for quality checking 1 Create a table of all instances of all diabetes SNOMED codes Table with multiple rows per patient, with each valid instance of a diabetes SNOMED code including patient identifier, date of diabetes code observation, and type of diabetes code (type 1, type 2, unspecified diabetes type) Number of unique patients with diabetes SNOMED code and % of patients in dataset 2 Find earliest diabetes code per patient Table with 1 row per patient and date of earliest code observation 3 Create a table of all instances of measured HbA1c Table with multiple rows per patient, with each instance of a valid HbA1c SNOMED code including patient identifier, date of result, value of result, and units of value where possible N/A 4 Create a table of all insulin and non-insulin glucose-lowering medication prescriptions Table with multiple rows per patient, with each instance of a valid dm+d code including patient identifier, date of prescription, drug class and drug substance, and any information relating to drug substance, quantity and dose available N/A 5 Find earliest HbA1c>=48 mmol/mol per patient Table with 1 row per patient and date of earliest HbA1c>=48 mmol/mol (NB: this relates to values after cleaning, which includes combining multiple values if on the same day Distribution of earliest code dates: min, P25, P50, P75, max 6 Find earliest insulin and non-insulin glucose-lowering medication prescription per patient Table with 1 row per patient and date of earliest prescription Distribution of earliest code dates: min, P25, P50, P75, max 7 Find diabetes diagnosis dates: earliest of diabetes code (step 2), HbA1c>=48 mmol/mol (step 5) and glucose-lowering medication prescription (step 6) Table with 1 row per patient and date of earliest diabetes code, HbA1c>=48 mmol/mol and glucose-lowering medication prescription, and overall earliest date of these Of patients with a diabetes code: % with any HbA1c>=48mmol/mol, % with earliest HbA1c>=48mmol/mol earlier than earliest diabetes code, % with any glucose-lowering medication prescription, % with earliest glucose-lowering medication prescription earlier than earliest diabetes code, % with any HbA1c>=48mmol/mol or glucose-lowering medication prescription, % with earliest HbA1c>=48mmol/mol or earliest glucose-lowering medication prescription earlier than earliest diabetes code 8 Find counts of type 1 and type 2-specific diabetes codes per patient Table with 1 row per patient and counts of type 1-specific diabetes SNOMED codes (use raw data, not cleaned) and counts of type 2-specific diabetes SNOMED codes N/A 9 Determine patient diabetes type using insulin use (step 4) and type 1 and type 2 code counts (step 8) as per our algorithm Table with 1 row per patient and assigned diabetes type: 'type 1', 'type 2' or 'unclassified' Of those with a diabetes code: % type 1, % type 2, % unclassified 10 For each of the following variables, create a table of all instances of the relevant SNOMED codes: Ethnicity BMI Weight Height Systolic blood pressure (SBP) Systolic blood pressure (DBP) Total cholesterol HDL cholesterol Triglycerides Alanine aminotransferase (ALT) Creatinine Urine albumin/creatinine ratio (ACR) Urine albumin Urine creatinine Retinopathy Foot complication Amputation Myocardial infarction Heart failure Stroke Angina Peripheral arterial disease Peripheral arterial revascularisation Transient ischaemic attack Hypertension Atrial fibrillation Ischaemic heart disease Coronary revascularisation Chronic kidney disease stage 5 Diabetic ketoacidosis/hyperosmolar hyperglycaemic state Alcohol Smoking CGM prescription Lipid lowering medication prescription Blood-pressure lowering medication prescription Anti-platelet therapy prescription For each variable, table with multiple rows per patient including patient identifier, date, severity of code (retinopathy, foot complication, amputation only), value of result and units where available (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR only) N/A 11 Define ethnicity using our algorithm Table with 1 row per patient and ethnicity % of all patients in each of 5-category and 11-category ethnicities and with missing ethnicity 12 Estimate date of birth (using our algorithm) if exact dates not provided Table with 1 row per patient and estimated date of birth Distribution of ages of diabetes diagnosis for each of type 1, type 2 and unclassified: min, P25, P50, P75, max","title":"Core diabetes dataset"},{"location":"projects/Exeter%2010%2C000/info.html","text":"","title":"Info"}]}