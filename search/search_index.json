{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Introduction This documentation defines the core diabetes dataset, including codelists and implementation rules for deriving its components, alongside code to extract these in a reproducible way. It also contains information on related projects. Core diabetes dataset The core diabetes dataset defines a standardised set of variables describing diabetes diagnosis, classification, treatment, and key outcomes, derived from routinely collected health data. It is designed to support consistent, reproducible analyses across studies by providing clear variable definitions, validated codelists, and explicit implementation rules for data extraction and derivation. This dataset was agreed by expert consensus with input from patients and the public as defined here [link to paper]. It was developed as part of a 2025-2026 NHS-funded driver project . The core data set can be found here: Core diabetes dataset Exeter 10,000 The Exeter 10,000 data set can be found here: Exeter 10,000 Codelists Codelists and algorithms for defining variables in routine primary and secondary care data (SNOMED, dm+d, ICD10 and OPCS4), as well as implementation rules, are provided for the components of the core diabetes dataset and other variables.","title":"Introduction"},{"location":"index.html#introduction","text":"This documentation defines the core diabetes dataset, including codelists and implementation rules for deriving its components, alongside code to extract these in a reproducible way. It also contains information on related projects.","title":"Introduction"},{"location":"index.html#core-diabetes-dataset","text":"The core diabetes dataset defines a standardised set of variables describing diabetes diagnosis, classification, treatment, and key outcomes, derived from routinely collected health data. It is designed to support consistent, reproducible analyses across studies by providing clear variable definitions, validated codelists, and explicit implementation rules for data extraction and derivation. This dataset was agreed by expert consensus with input from patients and the public as defined here [link to paper]. It was developed as part of a 2025-2026 NHS-funded driver project . The core data set can be found here: Core diabetes dataset","title":"Core diabetes dataset"},{"location":"index.html#exeter-10000","text":"The Exeter 10,000 data set can be found here: Exeter 10,000","title":"Exeter 10,000"},{"location":"index.html#codelists","text":"Codelists and algorithms for defining variables in routine primary and secondary care data (SNOMED, dm+d, ICD10 and OPCS4), as well as implementation rules, are provided for the components of the core diabetes dataset and other variables.","title":"Codelists"},{"location":"code_lists/conditions/diabetes/info.html","text":"Description This is a list of codes for diabetes: type 1, type 2 and unspecified type. It does not include codes for other types of diabetes e.g. gestational, secondary, monogenic, syndromic. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Presence of one of these codes may not be sufficient to define diabetes cases. In primary care data, the presence of a diabetes Quality and Outcome Framework (QOF) code is more specific for true diabetes cases ('qof' column in our SNOMED codelist indicates whether a code is a diabetes QOF code or not). In addition, specificity can be increased by removing patients with codes for other types of diabetes mellitus (gestational, secondary etc.) or diabetes insipidus, who may erroneously have diabetes mellitus codes in their records. Our algorithm for defining diabetes diagnosis date: the earliest of a code for diabetes, an HbA1c>=48 mmol/mol (see investigation/HbA1c) or a prescription for a glucose-lowering medication (including insulin; see medications/diabetes). It may not be possible to determine diagnosis dates in some datasets if historical data is not available. For those with type 2 diabetes, diabetes codes within the year of birth are ignored. It may be possible to ignore other diabetes codes which clearly do not relate to diagnosis in some datasets e.g. in CPRD ignore diabetes codes with obstype=4 as these represent family history. Our algorithm for distinguishing between type 1 and type 2 diabetes: No insulin prescriptions: Type 2 With at least one insulin prescription: At least one Type 1 and no Type 2 codes: Type 1 At least one Type 2 and no Type 1 codes: Type 2 Mix of Type 1 and Type 2 codes: if number of Type 1 medcodes >=2 x number of Type 2 medcodes, Type 1, otherwise Type 2 No Type 1 or Type 2 codes: leave as 'unclassified'. If required, a probable diabetes type can be assigned as follows: where time to insulin from diagnosis available: if diagnosed <35 years of age and on insulin within 1 year of diagnosis, Type 1, otherwise Type 2; if time to insulin not available: if diagnosed <35 years and not currently taking a non-insulin glucose-lowering medication (no prescription for a non-insulin glucose-lowering medication within 6 months, Type 1, otherwise Type 2. Since diabetes type is used to inform whether diabetes codes in year of birth should be excluded or not, this can create a circular problem in those with no type 1 or type 2-specific codes, where someone is classified as type 1 if diabetes codes in year of birth are included, and type 2 if diabetes medcodes in year of birth are excluded (or vice versa, if time to insulin from diagnosis is affected). These people are classed as 'unclassified', and need further investigation to establish diabetes type and date/age of diagnosis. Origins The origin of the SNOMED codelist was searching for diabetes and related codes in the SNOMED CT UK edition release 41.2.0 from NHS TRUD. Data Diabetes SNOMED Diabetes ICD10","title":"Description"},{"location":"code_lists/conditions/diabetes/info.html#description","text":"This is a list of codes for diabetes: type 1, type 2 and unspecified type. It does not include codes for other types of diabetes e.g. gestational, secondary, monogenic, syndromic.","title":"Description"},{"location":"code_lists/conditions/diabetes/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Presence of one of these codes may not be sufficient to define diabetes cases. In primary care data, the presence of a diabetes Quality and Outcome Framework (QOF) code is more specific for true diabetes cases ('qof' column in our SNOMED codelist indicates whether a code is a diabetes QOF code or not). In addition, specificity can be increased by removing patients with codes for other types of diabetes mellitus (gestational, secondary etc.) or diabetes insipidus, who may erroneously have diabetes mellitus codes in their records. Our algorithm for defining diabetes diagnosis date: the earliest of a code for diabetes, an HbA1c>=48 mmol/mol (see investigation/HbA1c) or a prescription for a glucose-lowering medication (including insulin; see medications/diabetes). It may not be possible to determine diagnosis dates in some datasets if historical data is not available. For those with type 2 diabetes, diabetes codes within the year of birth are ignored. It may be possible to ignore other diabetes codes which clearly do not relate to diagnosis in some datasets e.g. in CPRD ignore diabetes codes with obstype=4 as these represent family history. Our algorithm for distinguishing between type 1 and type 2 diabetes: No insulin prescriptions: Type 2 With at least one insulin prescription: At least one Type 1 and no Type 2 codes: Type 1 At least one Type 2 and no Type 1 codes: Type 2 Mix of Type 1 and Type 2 codes: if number of Type 1 medcodes >=2 x number of Type 2 medcodes, Type 1, otherwise Type 2 No Type 1 or Type 2 codes: leave as 'unclassified'. If required, a probable diabetes type can be assigned as follows: where time to insulin from diagnosis available: if diagnosed <35 years of age and on insulin within 1 year of diagnosis, Type 1, otherwise Type 2; if time to insulin not available: if diagnosed <35 years and not currently taking a non-insulin glucose-lowering medication (no prescription for a non-insulin glucose-lowering medication within 6 months, Type 1, otherwise Type 2. Since diabetes type is used to inform whether diabetes codes in year of birth should be excluded or not, this can create a circular problem in those with no type 1 or type 2-specific codes, where someone is classified as type 1 if diabetes codes in year of birth are included, and type 2 if diabetes medcodes in year of birth are excluded (or vice versa, if time to insulin from diagnosis is affected). These people are classed as 'unclassified', and need further investigation to establish diabetes type and date/age of diagnosis.","title":"Rules"},{"location":"code_lists/conditions/diabetes/info.html#origins","text":"The origin of the SNOMED codelist was searching for diabetes and related codes in the SNOMED CT UK edition release 41.2.0 from NHS TRUD.","title":"Origins"},{"location":"code_lists/conditions/diabetes/info.html#data","text":"Diabetes SNOMED Diabetes ICD10","title":"Data"},{"location":"code_lists/investigations/BMI/info.html","text":"Description This is a list of codes for measured BMI values. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Remove values less than 15 and greater than 100 kg per square meter as these are implausible for adults. Apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. Origins The origin of the SNOMED codelist was source codelists from Andy McGovern/RCGP and the BHF; reviewed by Andy McGovern in 2021. Data BMI SNOMED","title":"Description"},{"location":"code_lists/investigations/BMI/info.html#description","text":"This is a list of codes for measured BMI values.","title":"Description"},{"location":"code_lists/investigations/BMI/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Remove values less than 15 and greater than 100 kg per square meter as these are implausible for adults. Apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean.","title":"Rules"},{"location":"code_lists/investigations/BMI/info.html#origins","text":"The origin of the SNOMED codelist was source codelists from Andy McGovern/RCGP and the BHF; reviewed by Andy McGovern in 2021.","title":"Origins"},{"location":"code_lists/investigations/BMI/info.html#data","text":"BMI SNOMED","title":"Data"},{"location":"code_lists/investigations/HbA1c/info.html","text":"Description This is a list of codes for measured HbA1c values. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Convert all values to mmol/mol; where unit codes are not available we assume values <=20 are in % and require conversion. Remove mmol/mol values less than 20 and greater than 195 mmol/mol as these are implausible. Apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. In patients with diabetes, the earliest HbA1c>=48 mmol/mol is used in the algorithm to define diagnosis date - see conditions/diabetes. Origins The origin of the SNOMED codelist was the Pathology Bounded Code List (PBCL). Data HbA1c SNOMED","title":"Description"},{"location":"code_lists/investigations/HbA1c/info.html#description","text":"This is a list of codes for measured HbA1c values.","title":"Description"},{"location":"code_lists/investigations/HbA1c/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Convert all values to mmol/mol; where unit codes are not available we assume values <=20 are in % and require conversion. Remove mmol/mol values less than 20 and greater than 195 mmol/mol as these are implausible. Apply additional cleaning rules based on unit codes where available. If multiple values recorded on the same day for a patient, we take the mean. In patients with diabetes, the earliest HbA1c>=48 mmol/mol is used in the algorithm to define diagnosis date - see conditions/diabetes.","title":"Rules"},{"location":"code_lists/investigations/HbA1c/info.html#origins","text":"The origin of the SNOMED codelist was the Pathology Bounded Code List (PBCL).","title":"Origins"},{"location":"code_lists/investigations/HbA1c/info.html#data","text":"HbA1c SNOMED","title":"Data"},{"location":"code_lists/medications/CGM/info.html","text":"Description These are lists of dm+d codes for continuous glucose monitoring devices (sensors, transmitters, receivers) Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Origins The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD). Data CGM dm+d CGM names","title":"Description"},{"location":"code_lists/medications/CGM/info.html#description","text":"These are lists of dm+d codes for continuous glucose monitoring devices (sensors, transmitters, receivers)","title":"Description"},{"location":"code_lists/medications/CGM/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates.","title":"Rules"},{"location":"code_lists/medications/CGM/info.html#origins","text":"The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD).","title":"Origins"},{"location":"code_lists/medications/CGM/info.html#data","text":"CGM dm+d CGM names","title":"Data"},{"location":"code_lists/medications/antiplatelet%20medications/info.html","text":"Description These are lists of dm+d codes for antiplatelet medications: clopidogrel, dipyridamole, prasugrel, ticagrelor, cilostazol and (low-dose) aspirin. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Origins The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD). Data Antiplatelet medications dm+d Antiplatelet medication names","title":"Description"},{"location":"code_lists/medications/antiplatelet%20medications/info.html#description","text":"These are lists of dm+d codes for antiplatelet medications: clopidogrel, dipyridamole, prasugrel, ticagrelor, cilostazol and (low-dose) aspirin.","title":"Description"},{"location":"code_lists/medications/antiplatelet%20medications/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates.","title":"Rules"},{"location":"code_lists/medications/antiplatelet%20medications/info.html#origins","text":"The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD).","title":"Origins"},{"location":"code_lists/medications/antiplatelet%20medications/info.html#data","text":"Antiplatelet medications dm+d Antiplatelet medication names","title":"Data"},{"location":"code_lists/medications/blood%20pressure%20lowering/info.html","text":"Description These are lists of dm+d codes for blood pressure lowering (antihypertensive) medications in the following classes: ACE-inhibitors, angiotensin II receptor blockers, beta blockers, calcium channel blockers, and thiazide/thiazide-like diuretics. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. Origins The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD). Data ACE-inhibitor dm+d ARB dm+d Beta blockers dm+d Calcium channel blockers dm+d Thiazide/thiazide-like diuretics dm+d Blood pressure drug names","title":"Description"},{"location":"code_lists/medications/blood%20pressure%20lowering/info.html#description","text":"These are lists of dm+d codes for blood pressure lowering (antihypertensive) medications in the following classes: ACE-inhibitors, angiotensin II receptor blockers, beta blockers, calcium channel blockers, and thiazide/thiazide-like diuretics.","title":"Description"},{"location":"code_lists/medications/blood%20pressure%20lowering/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates.","title":"Rules"},{"location":"code_lists/medications/blood%20pressure%20lowering/info.html#origins","text":"The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD).","title":"Origins"},{"location":"code_lists/medications/blood%20pressure%20lowering/info.html#data","text":"ACE-inhibitor dm+d ARB dm+d Beta blockers dm+d Calcium channel blockers dm+d Thiazide/thiazide-like diuretics dm+d Blood pressure drug names","title":"Data"},{"location":"code_lists/medications/diabetes/info.html","text":"Description These are lists of dm+d codes for non-insulin glucose-lowering medication and insulin. Rules Check to make sure the date is within the range expected given the data source and patient DOB and death dates. In patients with diabetes, the earliest prescription for a glucose-lowering medication/insulin is used in the algorithm to define diagnosis date - see conditions/diabetes. In patients with diabetes, being prescribed insulin is used in the algorithm to define diabetes type - see conditions/diabetes. Origins The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD). Data Insulin dm+d Insulin names Non-insulin glucose-lowering medications dm+d Non-insulin glucose-lowering medications names","title":"Description"},{"location":"code_lists/medications/diabetes/info.html#description","text":"These are lists of dm+d codes for non-insulin glucose-lowering medication and insulin.","title":"Description"},{"location":"code_lists/medications/diabetes/info.html#rules","text":"Check to make sure the date is within the range expected given the data source and patient DOB and death dates. In patients with diabetes, the earliest prescription for a glucose-lowering medication/insulin is used in the algorithm to define diagnosis date - see conditions/diabetes. In patients with diabetes, being prescribed insulin is used in the algorithm to define diabetes type - see conditions/diabetes.","title":"Rules"},{"location":"code_lists/medications/diabetes/info.html#origins","text":"The codelists were created by searching for generic and brand names (see files) in the SNOMED CT UK Drug Extension RF2 release 41.3.0 and NHSBSA dm+d Release 1.2.0 (both available from NHS TRUD).","title":"Origins"},{"location":"code_lists/medications/diabetes/info.html#data","text":"Insulin dm+d Insulin names Non-insulin glucose-lowering medications dm+d Non-insulin glucose-lowering medications names","title":"Data"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html","text":"Description This is a description of how date of birth can be defined when either date or date and month of birth are not provided. Rules Earliest possible date of birth is defined as the 1st of the month (where month of birth and year of birth available) / 1st January where only year of birth available Patient date of birth is defined as the earliest of: 15th of month of birth (where month of birth and year of birth available) / 1st July where only year of birth available Earliest recorded code in records (excluding those before earliest possible date of birth) Registration start date, where available (excluding before earliest possible date of birth) Origins Not applicable Data Not applicable","title":"Description"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#description","text":"This is a description of how date of birth can be defined when either date or date and month of birth are not provided.","title":"Description"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#rules","text":"Earliest possible date of birth is defined as the 1st of the month (where month of birth and year of birth available) / 1st January where only year of birth available Patient date of birth is defined as the earliest of: 15th of month of birth (where month of birth and year of birth available) / 1st July where only year of birth available Earliest recorded code in records (excluding those before earliest possible date of birth) Registration start date, where available (excluding before earliest possible date of birth)","title":"Rules"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#origins","text":"Not applicable","title":"Origins"},{"location":"code_lists/sociodemographics/date%20of%20birth/info.html#data","text":"Not applicable","title":"Data"},{"location":"projects/Core%20dataset/info.html","text":"Core diabetes dataset This page details the steps to produce the tables which comprise the core diabetes dataset in GP data. These tables can then be combined to create different diabetes cohorts. Prerequisites: Date of birth should be available for all patients (at minimum, year of birth; month and year preferred). Patients without this information should be excluded. Where the exact date of birth is unavailable, we have developed an algorithm for defining date of birth ; however, its use may be restricted by data source\u2013specific governance or regulatory requirements. Sex/gender should be available for all patients (male/female/indeterminate or other) Additional data cleaning steps depend on data source: CPRD additional exclude those without valid registration date or aged >115 years, or from practices with anomalous mortality rates Additional considerations: Earliest codes for conditions such as diabetes may be stored in 'problem' or 'observation' table depending on data source. Step Description Output Summary statistics for quality checking 1 Create a table of all clean instances of all diabetes SNOMED codes 1 table with multiple rows per patient, with each clean instance of a diabetes SNOMED code including patient identifier, date of diabetes code observation, and type of diabetes code (type 1, type 2, unspecified diabetes type) Clean diabetes code dates: min, P25, P50, P75, max, mode. Number of unique patients with clean diabetes SNOMED code and % of patients in dataset 2 Find earliest clean diabetes code per patient 1 table with 1 row per patient and date of earliest clean code observation Distribution of earliest code dates: min, P25, P50, P75, max, mode 3 Create a table of all clean HbA1c measurements in mmol/mol 1 table with multiple rows per patient, with each cleaned HbA1c measurement including patient identifier, date of result and value of result. Cleaning includes combining where there are multiple values on the same day so there should not be multiple rows with the same date and patient identifier. Clean HbA1c values: min, P25, P50, P75, max, mode. Clean HbA1c dates: min, P25, P50, P75, max, mode. 4 Create tables of all clean insulin and non-insulin glucose-lowering medication prescriptions 2 tables (1 for insulin and 1 for non-insulin glucose-lowering medications) with multiple rows per patient, with each clean instance of a dm+d code including patient identifier, date of prescription, drug class and drug substance, and any information relating to drug substance, quantity and dose available Clean insulin dates: min, P25, P50, P75, max, mode. Clean non-insulin glucose-lowering medication dates: min, P25, P50, P75, max, mode. Number of unique patients with clean insulin or non-insulin glucose-lowering medication prescription and % of patients in dataset 5 Find earliest HbA1c>=48 mmol/mol per patient 1 table with 1 row per patient and date of earliest clean HbA1c>=48 mmol/mol Earliest code dates: min, P25, P50, P75, max, mode. Number of unique patients with HbA1c>=48 mmol/mol and % of patients in dataset 6 Find earliest insulin and non-insulin glucose-lowering medication prescription per patient Table with 1 row per patient and date of earliest prescription Earliest insulin code dates: min, P25, P50, P75, max, mode. Earliest non-insulin glucose-lowering medication dates: min, P25, P50, P75, max, mode. 7 Find diabetes diagnosis dates: earliest of diabetes code (step 2), HbA1c>=48 mmol/mol (step 5) and glucose-lowering medication prescription (step 6) Table with 1 row per patient and date of earliest diabetes code, HbA1c>=48 mmol/mol and glucose-lowering medication prescription, and overall earliest date of these Of patients with a clean diabetes code: % with any HbA1c>=48mmol/mol, % with earliest HbA1c>=48mmol/mol earlier than earliest diabetes code, % with any glucose-lowering medication prescription, % with earliest glucose-lowering medication prescription earlier than earliest diabetes code, % with any HbA1c>=48mmol/mol or glucose-lowering medication prescription, % with earliest HbA1c>=48mmol/mol or earliest glucose-lowering medication prescription earlier than earliest diabetes code 8 Find counts of type 1 and type 2-specific diabetes codes per patient using clean table from step 1 Table with 1 row per patient and counts of type 1-specific diabetes SNOMED codes and counts of type 2-specific diabetes SNOMED codes N/A 9 Determine patient diabetes type using insulin use (step 4) and type 1 and type 2 code counts (step 8) as per our algorithm Table with 1 row per patient and assigned diabetes type: 'type 1', 'type 2' or 'unclassified' Of those with a diabetes code: % type 1, % type 2, % unclassified 10 For each of the following variables, create a table of all clean instances of the relevant SNOMED codes: Ethnicity BMI Weight Height Systolic blood pressure (SBP) Systolic blood pressure (DBP) Total cholesterol HDL cholesterol Triglycerides Alanine aminotransferase (ALT) Creatinine Urine albumin/creatinine ratio (ACR) Urine albumin Urine creatinine Retinopathy Foot complication Amputation Myocardial infarction Heart failure Stroke Angina Peripheral arterial disease Peripheral arterial revascularisation Transient ischaemic attack Hypertension Atrial fibrillation Ischaemic heart disease Coronary revascularisation Chronic kidney disease stage 5 Diabetic ketoacidosis/hyperosmolar hyperglycaemic state Alcohol Smoking CGM prescription Lipid lowering medication prescription Blood-pressure lowering medication prescription Anti-platelet therapy prescription For each variable, table with multiple rows per patient including patient identifier, date, severity of code (retinopathy, foot complication, amputation only) and value of result (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR only) For all variables: clean dates: code dates: min, P25, P50, P75, max, mode. For measured values (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR): clean values: min, P25, P50, P75, max, mode 11 Define ethnicity using our algorithm Table with 1 row per patient and ethnicity % of all patients in each of 5-category and 11-category ethnicities and with missing ethnicity","title":"Core diabetes dataset"},{"location":"projects/Core%20dataset/info.html#core-diabetes-dataset","text":"This page details the steps to produce the tables which comprise the core diabetes dataset in GP data. These tables can then be combined to create different diabetes cohorts. Prerequisites: Date of birth should be available for all patients (at minimum, year of birth; month and year preferred). Patients without this information should be excluded. Where the exact date of birth is unavailable, we have developed an algorithm for defining date of birth ; however, its use may be restricted by data source\u2013specific governance or regulatory requirements. Sex/gender should be available for all patients (male/female/indeterminate or other) Additional data cleaning steps depend on data source: CPRD additional exclude those without valid registration date or aged >115 years, or from practices with anomalous mortality rates Additional considerations: Earliest codes for conditions such as diabetes may be stored in 'problem' or 'observation' table depending on data source. Step Description Output Summary statistics for quality checking 1 Create a table of all clean instances of all diabetes SNOMED codes 1 table with multiple rows per patient, with each clean instance of a diabetes SNOMED code including patient identifier, date of diabetes code observation, and type of diabetes code (type 1, type 2, unspecified diabetes type) Clean diabetes code dates: min, P25, P50, P75, max, mode. Number of unique patients with clean diabetes SNOMED code and % of patients in dataset 2 Find earliest clean diabetes code per patient 1 table with 1 row per patient and date of earliest clean code observation Distribution of earliest code dates: min, P25, P50, P75, max, mode 3 Create a table of all clean HbA1c measurements in mmol/mol 1 table with multiple rows per patient, with each cleaned HbA1c measurement including patient identifier, date of result and value of result. Cleaning includes combining where there are multiple values on the same day so there should not be multiple rows with the same date and patient identifier. Clean HbA1c values: min, P25, P50, P75, max, mode. Clean HbA1c dates: min, P25, P50, P75, max, mode. 4 Create tables of all clean insulin and non-insulin glucose-lowering medication prescriptions 2 tables (1 for insulin and 1 for non-insulin glucose-lowering medications) with multiple rows per patient, with each clean instance of a dm+d code including patient identifier, date of prescription, drug class and drug substance, and any information relating to drug substance, quantity and dose available Clean insulin dates: min, P25, P50, P75, max, mode. Clean non-insulin glucose-lowering medication dates: min, P25, P50, P75, max, mode. Number of unique patients with clean insulin or non-insulin glucose-lowering medication prescription and % of patients in dataset 5 Find earliest HbA1c>=48 mmol/mol per patient 1 table with 1 row per patient and date of earliest clean HbA1c>=48 mmol/mol Earliest code dates: min, P25, P50, P75, max, mode. Number of unique patients with HbA1c>=48 mmol/mol and % of patients in dataset 6 Find earliest insulin and non-insulin glucose-lowering medication prescription per patient Table with 1 row per patient and date of earliest prescription Earliest insulin code dates: min, P25, P50, P75, max, mode. Earliest non-insulin glucose-lowering medication dates: min, P25, P50, P75, max, mode. 7 Find diabetes diagnosis dates: earliest of diabetes code (step 2), HbA1c>=48 mmol/mol (step 5) and glucose-lowering medication prescription (step 6) Table with 1 row per patient and date of earliest diabetes code, HbA1c>=48 mmol/mol and glucose-lowering medication prescription, and overall earliest date of these Of patients with a clean diabetes code: % with any HbA1c>=48mmol/mol, % with earliest HbA1c>=48mmol/mol earlier than earliest diabetes code, % with any glucose-lowering medication prescription, % with earliest glucose-lowering medication prescription earlier than earliest diabetes code, % with any HbA1c>=48mmol/mol or glucose-lowering medication prescription, % with earliest HbA1c>=48mmol/mol or earliest glucose-lowering medication prescription earlier than earliest diabetes code 8 Find counts of type 1 and type 2-specific diabetes codes per patient using clean table from step 1 Table with 1 row per patient and counts of type 1-specific diabetes SNOMED codes and counts of type 2-specific diabetes SNOMED codes N/A 9 Determine patient diabetes type using insulin use (step 4) and type 1 and type 2 code counts (step 8) as per our algorithm Table with 1 row per patient and assigned diabetes type: 'type 1', 'type 2' or 'unclassified' Of those with a diabetes code: % type 1, % type 2, % unclassified 10 For each of the following variables, create a table of all clean instances of the relevant SNOMED codes: Ethnicity BMI Weight Height Systolic blood pressure (SBP) Systolic blood pressure (DBP) Total cholesterol HDL cholesterol Triglycerides Alanine aminotransferase (ALT) Creatinine Urine albumin/creatinine ratio (ACR) Urine albumin Urine creatinine Retinopathy Foot complication Amputation Myocardial infarction Heart failure Stroke Angina Peripheral arterial disease Peripheral arterial revascularisation Transient ischaemic attack Hypertension Atrial fibrillation Ischaemic heart disease Coronary revascularisation Chronic kidney disease stage 5 Diabetic ketoacidosis/hyperosmolar hyperglycaemic state Alcohol Smoking CGM prescription Lipid lowering medication prescription Blood-pressure lowering medication prescription Anti-platelet therapy prescription For each variable, table with multiple rows per patient including patient identifier, date, severity of code (retinopathy, foot complication, amputation only) and value of result (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR only) For all variables: clean dates: code dates: min, P25, P50, P75, max, mode. For measured values (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR): clean values: min, P25, P50, P75, max, mode 11 Define ethnicity using our algorithm Table with 1 row per patient and ethnicity % of all patients in each of 5-category and 11-category ethnicities and with missing ethnicity","title":"Core diabetes dataset"},{"location":"projects/Exeter%2010%2C000/info.html","text":"","title":"Info"}]}