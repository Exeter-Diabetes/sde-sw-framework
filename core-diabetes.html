<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Diabetes Dataset - Data Specification</title>
    <link rel="stylesheet" href="core-diabetes.css">
</head>
<body>
    <header>
        <a href="index.html" class="back-link">‚Üê Back to main</a>
        <h1>Core Diabetes Dataset</h1>
    </header>
    
    <main>
        <div class="content">
            <h1 id="core-diabetes-dataset">Core diabetes dataset</h1>
            <p>This page details the steps to produce the tables which comprise the core diabetes dataset in GP data. These tables can then be combined to create different diabetes cohorts.</p>
            <p>&nbsp;</p>
            <h2>Prerequisites</h2>
            <ul>
                <li>Date of birth (at least year of birth; month and year is preferable) available for all patients; those without should be excluded.</li>
                <li>Sex/gender available for all patients (male/female/indeterminate or other)</li>
                <li>Additional data cleaning steps depend on data source: CPRD additional exclude those without valid registration date or aged &gt;115 years, or from practices with anomalous mortality rates</li>
            </ul>
            <p>&nbsp;</p>
            <h2>Additional considerations</h2>
            <p>Earliest codes for conditions such as diabetes may be stored in 'problem' or 'observation' table depending on data source.</p>
            <p>&nbsp;</p>
            <h2>Implementation Steps</h2>
            <p>The following table outlines the 12-step process for creating the core diabetes dataset:</p>
            <table>
                <thead>
                    <tr>
                        <th>Step</th>
                        <th>Description</th>
                        <th>Output</th>
                        <th>Summary statistics for quality checking</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Create a table of all instances of all diabetes SNOMED codes</td>
                        <td>Table with multiple rows per patient, with each valid instance of a diabetes SNOMED code including patient identifier, date of diabetes code observation, and type of diabetes code (type 1, type 2, unspecified diabetes type)</td>
                        <td>Number of unique patients with diabetes SNOMED code and % of patients in dataset</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Find earliest diabetes code per patient</td>
                        <td>Table with 1 row per patient and date of earliest code observation</td>
                        <td>Distribution of earliest code dates: min, P25, P50, P75, max</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Create a table of all instances of measured HbA1c</td>
                        <td>Table with multiple rows per patient, with each instance of a valid HbA1c SNOMED code including patient identifier, date of result, value of result, and units of value where possible</td>
                        <td>N/A</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Create a table of all insulin and non-insulin glucose-lowering medication prescriptions</td>
                        <td>Table with multiple rows per patient, with each instance of a valid dm+d code including patient identifier, date of prescription, drug class and drug substance, and any information relating to drug substance, quantity and dose available</td>
                        <td>N/A</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Find earliest HbA1c&gt;=48 mmol/mol per patient</td>
                        <td>Table with 1 row per patient and date of earliest HbA1c&gt;=48 mmol/mol (NB: this relates to values after cleaning, which includes combining multiple values if on the same day)</td>
                        <td>Distribution of earliest code dates: min, P25, P50, P75, max</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Find earliest insulin and non-insulin glucose-lowering medication prescription per patient</td>
                        <td>Table with 1 row per patient and date of earliest prescription</td>
                        <td>Distribution of earliest code dates: min, P25, P50, P75, max</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Find diabetes diagnosis dates: earliest of diabetes code (step 2), HbA1c&gt;=48 mmol/mol (step 5) and glucose-lowering medication prescription (step 6)</td>
                        <td>Table with 1 row per patient and date of earliest diabetes code, HbA1c&gt;=48 mmol/mol and glucose-lowering medication prescription, and overall earliest date of these</td>
                        <td>Of patients with a diabetes code: % with any HbA1c&gt;=48mmol/mol, % with earliest HbA1c&gt;=48mmol/mol earlier than earliest diabetes code, % with any glucose-lowering medication prescription, % with earliest glucose-lowering medication prescription earlier than earliest diabetes code, % with any HbA1c&gt;=48mmol/mol or glucose-lowering medication prescription, % with earliest HbA1c&gt;=48mmol/mol or earliest glucose-lowering medication prescription earlier than earliest diabetes code</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Find counts of type 1 and type 2-specific diabetes codes per patient</td>
                        <td>Table with 1 row per patient and counts of type 1-specific diabetes SNOMED codes (use raw data, not cleaned) and counts of type 2-specific diabetes SNOMED codes</td>
                        <td>N/A</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Determine patient diabetes type using insulin use (step 4) and type 1 and type 2 code counts (step 8) as per our algorithm</td>
                        <td>Table with 1 row per patient and assigned diabetes type: 'type 1', 'type 2' or 'unclassified'</td>
                        <td>Of those with a diabetes code: % type 1, % type 2, % unclassified</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>For each of the following variables, create a table of all instances of the relevant SNOMED codes: Ethnicity, BMI, Weight, Height, Systolic blood pressure (SBP), Diastolic blood pressure (DBP), Total cholesterol, HDL cholesterol, Triglycerides, Alanine aminotransferase (ALT), Creatinine, Urine albumin/creatinine ratio (ACR), Urine albumin, Urine creatinine, Retinopathy, Foot complication, Amputation, Myocardial infarction, Heart failure, Stroke, Angina, Peripheral arterial disease, Peripheral arterial revascularisation, Transient ischaemic attack, Hypertension, Atrial fibrillation, Ischaemic heart disease, Coronary revascularisation, Chronic kidney disease stage 5, Diabetic ketoacidosis/hyperosmolar hyperglycaemic state, Alcohol, Smoking, CGM prescription, Lipid lowering medication prescription, Blood-pressure lowering medication prescription, Anti-platelet therapy prescription</td>
                        <td>For each variable, table with multiple rows per patient including patient identifier, date, severity of code (retinopathy, foot complication, amputation only), value of result and units where available (BMI, weight, height, SBP, DBP, total cholesterol, HDL, triglycerides, ALT, creatinine, urine albumin/creatinine/ACR only)</td>
                        <td>N/A</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Define ethnicity using our algorithm</td>
                        <td>Table with 1 row per patient and ethnicity</td>
                        <td>% of all patients in each of 5-category and 11-category ethnicities and with missing ethnicity</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>Estimate date of birth (using our algorithm) if exact dates not provided</td>
                        <td>Table with 1 row per patient and estimated date of birth</td>
                        <td>Distribution of ages of diabetes diagnosis for each of type 1, type 2 and unclassified: min, P25, P50, P75, max</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>
</body>
</html>
